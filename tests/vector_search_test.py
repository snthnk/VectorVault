from src.embedder import EmbeddingModel
from src.vector_store import VectorStore

texts_list = [
    # 1. Космос
    """Исследование Марса является одной из главных задач современной космонавтики. Роверы, такие как "Perseverance", ищут признаки древней микробной жизни и собирают образцы грунта. Ученые надеются, что будущие пилотируемые миссии смогут доставить эти образцы на Землю для детального анализа, что может кардинально изменить наше понимание о жизни во Вселенной.""",

    # 2. Технологии
    """Искусственный интеллект (ИИ) стремительно меняет наш мир. От голосовых помощников в смартфонах до сложных алгоритмов, анализирующих огромные объемы данных, ИИ уже стал частью повседневной жизни. Развитие нейронных сетей открывает новые возможности в медицине, науке и бизнесе, но также ставит важные этические вопросы перед обществом.""",

    # 3. Природа
    """Тропические леса Амазонки, часто называемые "легкими планеты", играют ключевую роль в регулировании глобального климата. Они поглощают углекислый газ и производят кислород. Это дом для миллионов видов растений и животных, многие из которых еще не открыты наукой. К сожалению, вырубка лесов представляет серьезную угрозу этому биоразнообразию.""",

    # 4. История
    """Изобретение книгопечатания Иоганном Гутенбергом в XV веке стало настоящей революцией. Оно сделало книги и знания доступными для широких масс, а не только для элиты. Это способствовало распространению идей Ренессанса, Реформации и научного прогресса, навсегда изменив ход европейской и мировой истории, ускорив развитие образования.""",

    # 5. Искусство
    """Импрессионизм – художественное течение, возникшее во Франции в XIX веке. Художники, такие как Клод Моне и Пьер Огюст Ренуар, стремились запечатлеть мимолетное впечатление от света и цвета. Они работали на открытом воздухе, используя короткие, видимые мазки, чтобы передать движение и атмосферу момента, а не фотографическую точность.""",

    # 6. Здоровье и спорт
    """Регулярные физические упражнения имеют огромное значение для здоровья. Они укрепляют сердечно-сосудистую систему, помогают контролировать вес и снижают риск многих хронических заболеваний. Кроме того, спорт способствует выработке эндорфинов, улучшая настроение и уменьшая стресс. Даже умеренная активность, такая как ежедневная ходьба, приносит ощутимую пользу организму.""",

    # 7. Кулинария
    """Хотя лепешки с начинкой существовали с древних времен, современная пицца родилась в Неаполе, Италия. Изначально это была простая еда для бедняков. Легенда гласит, что пицца "Маргарита" была создана в честь королевы Маргариты Савойской, а ее ингредиенты – томаты, моцарелла и базилик – символизировали цвета итальянского флага.""",

    # 8. Путешествия
    """Париж, столица Франции, по праву считается одним из самых романтичных городов мира. Его очарование кроется в уютных улочках Монмартра, величественной архитектуре Лувра и Эйфелевой башни, а также в атмосфере бесчисленных кафе. Прогулка вдоль Сены или посещение маленькой булочной за свежим круассаном оставляет незабываемые впечатления.""",

    # 9. Наука (Биология)
    """Молекула ДНК содержит генетические инструкции для развития и функционирования всех живых организмов. Ее структура в виде двойной спирали, открытая Уотсоном и Криком, является ключом к пониманию наследственности. Каждая "ступенька" этой спирали состоит из пар оснований, последовательность которых кодирует всю информацию о нас.""",

    # 10. Психология
    """Критическое мышление — это способность анализировать информацию, ставить под сомнение утверждения и формировать обоснованные выводы. Этот навык важен не только в учебе или работе, но и в повседневной жизни. Он помогает отличать факты от мнений, распознавать манипуляции и принимать более взвешенные и независимые решения в современном мире."""
]

query_text = ["На протяжении всей истории человечество разрабатывает новые инструменты и идеи для понимания сложных систем – от кода жизни до структуры общества и Вселенной. Этот непрерывный процесс исследования и анализа, основанный на критическом мышлении, позволяет нам не только сохранять культурное наследие, но и формировать осознанное будущее для нашей планеты."]

embedder = EmbeddingModel()
vector_store = VectorStore(embedder.get_embeddings_dim(), use_cosine_similarity=True)
vectors = embedder.encode(texts_list)
vector_store.add_vectors(vectors, texts_list)

res = vector_store.search(embedder.encode(query_text))
print(f"Входной текст: {query_text}")
for num, d in enumerate(res):
    print(f'Топ {num+1} текст (scores = {d["score"]}):')
    print(f'{d["metadata"]["text"][:100]}...')
